% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sim_power_N.R
\name{sim.power.N}
\alias{sim.power.N}
\title{Determine Sample Size for Desired Coverage Properties}
\usage{
sim.power.N(N.sim = 50, pi, p, p.prime, gamma, direct)
}
\arguments{
\item{N.sim}{Integer. Number of Monte Carlo simulations per sample size.
Default is 50. Larger values provide more stable estimates but increase
computation time.}

\item{pi}{Numeric. True prevalence rate of the sensitive attribute (between 0 and 1).}

\item{p}{Numeric. Probability for the randomization item in sensitive question.}

\item{p.prime}{Numeric. Probability for the anchor question (non-sensitive).}

\item{gamma}{Numeric. Proportion of attentive respondents (between 0 and 1).}

\item{direct}{Numeric. Direct questioning estimate for comparison purposes.}
}
\value{
A data frame with three columns:
\describe{
  \item{SampleSize}{Sample sizes tested: 100, 500, 1000, 1500, 2000, 2500, 3000}
  \item{CoverageZero}{Percentage of 95\% CIs that include zero.
                      Lower values indicate better precision (CIs exclude zero).}
  \item{CoverageDirect}{Percentage of 95\% CIs that include the direct estimate.
                        Values near 95\% suggest good agreement with direct questioning.}
}
}
\description{
Tests multiple sample sizes to determine which achieves desired confidence
interval coverage properties. Specifically, it calculates what percentage of
95\% confidence intervals (1) exclude zero and (2) include the direct estimate.
This helps researchers choose a sample size that provides sufficient precision.
}
\details{
This function is useful for planning studies where researchers want to:
\enumerate{
  \item Distinguish the estimated prevalence from zero with high confidence
  \item Obtain narrow confidence intervals for precise estimation
  \item Compare crosswise estimates with direct questioning estimates
}

For each sample size, the function:
\itemize{
  \item Simulates N.sim datasets using the crosswise model
  \item Computes bias-corrected estimates with bootstrap 95\% CIs
  \item Calculates what percentage of CIs contain zero
  \item Calculates what percentage of CIs contain the direct estimate
}

A progress bar displays simulation progress.
}
\note{
\itemize{
  \item Low CoverageZero values indicate CIs that reliably exclude zero
        (good for establishing that prevalence is non-zero)
  \item CoverageDirect near 95\% suggests consistency between crosswise and
        direct questioning approaches
  \item This function uses 500 bootstrap iterations per simulation
}
}
\examples{
# Find sample size needed to reliably exclude zero
\dontrun{
result <- sim.power.N(
  N.sim = 50,
  pi = 0.1,
  p = 0.1,
  p.prime = 0.1,
  gamma = 0.8,
  direct = 0.05
)

print(result)

# Visualize results
plot(result$SampleSize, result$CoverageZero,
     type = "b", xlab = "Sample Size",
     ylab = "\% of CIs Including Zero",
     main = "Precision vs Sample Size")
}

}
\references{
Atsusaka and Stevenson (2021). Appendix C5: Sample Size Determination
and Parameter Selection.
}
\seealso{
\code{\link{sim.power}} for the underlying simulation function
}
